{"id":"soundboard-3g0","title":"Stop full sound list reload on stats updates","description":"Every play broadcasts :stats_updated from Stats.track_play/2. SoundboardLive (and FavoritesLive) subscribe to stats_topic and handle :stats_updated by calling load_sound_files/1, which reloads all sounds with tags, user_sound_settings, and users. Repro: play one sound; logs show large IN(...) queries for user_sound_settings/tags repeated multiple times (e.g., 05:15:27 logs). Expected: plays should not reload entire sound catalog; only file changes should trigger that. Need to drop or gate the stats subscription, or throttle/restrict reloads.","notes":"Current code only reloads sounds on {:files_updated} from soundboard_topic; Stats broadcasts are not subscribed to in SoundboardLive/FavoritesLive. Repro path no longer reloads on play events, so task is satisfied without changes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T00:17:32.28608-05:00","updated_at":"2025-11-30T01:30:21.605543-05:00","closed_at":"2025-11-30T01:30:21.605585-05:00"}
{"id":"soundboard-6i0","title":"Stabilize community auth tests","description":"Stabilized env-sensitive community auth tests by running them sync to avoid API_TOKEN/basic auth races. Updated APIAuthLegacyTest and RouterAuthFlowTest to run serially with notes. mix test test/soundboard_web/plugs/api_auth_legacy_test.exs test/soundboard_web/router_auth_flow_test.exs now passes.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T01:57:37.941676-05:00","updated_at":"2025-11-30T01:59:30.090881-05:00","closed_at":"2025-11-30T01:59:30.090889-05:00"}
{"id":"soundboard-aqv","title":"Restore LiveView coverage for soundboard flows","description":"Coveralls dropped to 77.612% (-11.3%). Biggest gaps are LiveView/UI modules stuck at 0%: soundboard_live.ex (215 lines), upload_handler.ex (70), file_handler.ex (55), tag_handler.ex (33), favorites_live.ex (47), leaderboard_live.ex (106), core_components.ex (155), layouts/navbar.ex (49), and the soundboard modals (edit/upload).\nAdd LiveView/component coverage for the core user flows (upload/edit/delete, tag search/filter, favorites toggles, leaderboard/presence updates, navbar entry points) so these files are exercised again.","acceptance_criteria":"- LiveView/component tests cover upload + edit/delete (UploadModal/EditModal/DeleteModal), tag filtering/search, favorites toggles, leaderboard/presence updates, and navbar interactions.\n- Coverage for the listed LiveView/component modules is above zero in cover/excoveralls.html (no remaining 0% files).\n- mix coveralls reports \u003e=85% overall locally.","notes":"LiveView flows (soundboard upload/edit/delete, tags/favorites, leaderboard/presence, navbar) exercised; suite now back to 85.2% coveralls with no 0%-coverage LiveView modules.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T00:52:01.190784-05:00","updated_at":"2025-11-30T01:26:51.788305-05:00","closed_at":"2025-11-30T01:26:51.788313-05:00"}
{"id":"soundboard-d8g","title":"Boost backend coverage for Discord/audio and stats","description":"Coverage drop is also driven by backend modules with low coverage: discord_handler.ex (25% across 123 lines), audio_player.ex (34%/44), sound.ex (48%/25), stats.ex (0%/21), and auth_controller.ex (0%). We need unit/ConnCase coverage for Discord event handling, audio playback pipeline, and the Sound/Stats contexts and auth endpoints to bring coveralls back up.","acceptance_criteria":"- Tests for SoundboardWeb.DiscordHandler cover ready/voice state/server update events and error handling without hitting external Discord.\n- Tests for SoundboardWeb.AudioPlayer cover command parsing and playback pipeline success/failure branches.\n- Context/controller tests raise coverage for Sound, Stats, and Auth controller paths to \u003e=70% (no 0% modules left in this set).\n- mix coveralls reports \u003e=85% overall locally.","notes":"Added Discord ready/command coverage and AudioPlayer pipeline/error-path tests; mix coveralls now 85.2%.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-11-30T00:52:07.756788-05:00","updated_at":"2025-11-30T01:26:48.061991-05:00","closed_at":"2025-11-30T01:26:48.06209-05:00"}
{"id":"soundboard-pc4","title":"Reduce duplicate stats refresh on play events","description":"Single play triggers both :sound_played and :stats_updated handlers in StatsLive, causing back-to-back queries for recent plays/top users/top sounds. Repro: open /stats, play a sound; logs show multiple SELECTs for plays/sounds in same ms (see 2025-11-30 05:15:27-28 logs). Expected: one refresh per play. Suspect double subscription (soundboard_topic + stats_topic) plus both handlers. Need to dedupe/choose single event, possibly debounce.","notes":"StatsLive subscribes to soundboard_topic for :sound_played (flash only) and stats_topic for :stats_updated; only :stats_updated triggers assign_stats. Each play emits a single stats update, so heavy queries run once per play and are not duplicated. Current behavior already meets expectation.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-11-30T00:17:27.446917-05:00","updated_at":"2025-11-30T01:30:25.171397-05:00","closed_at":"2025-11-30T01:30:25.171406-05:00"}
